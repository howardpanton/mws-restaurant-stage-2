"use strict";var map,restaurant=void 0;window.initMap=function(){fetchRestaurantFromURL(function(e,n){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:n.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})},window.addEventListener("loaded",function(e){var n=document.getElementById("restaurant-container"),t=document.querySelectorAll(".info-grid"),r=ImageHelper.lazyLoadImages(e.detail);r=document.createRange().createContextualFragment(r);n.childNodes[1];n.removeChild(n.childNodes[3]),t[0].insertBefore(r,t[0].childNodes[1])},!1);var fetchRestaurantFromURL=function(t){if(self.restaurant)t(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,n){(self.restaurant=n)?(fillRestaurantHTML(),t(null,n)):console.error(e)}):(error="No restaurant id in URL",t(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,n=new CustomEvent("loaded",{detail:e}),t=document.getElementById("restaurant-container"),r='\n    <h2 id="restaurant-name">'+e.name+'</h2>\n    <div class="loading-ball">\n      <div></div>\n    </div>\n    <div class="info-grid">\n      <p id="restaurant-cuisine">'+e.cuisine_type+'</p>\n    </div>\n    <div class="details-grid">\n      <p id="restaurant-address">'+e.address+"</p>\n    </div>\n  ";if(t.innerHTML=r,e.operating_hours){var a=document.querySelectorAll(".details-grid");a[0].insertBefore(fillRestaurantHoursHTML(),a[0].childNodes[2])}fillReviewsHTML(),window.setTimeout(function(){window.dispatchEvent(n)},3e3)},fillRestaurantHoursHTML=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,e=document.createElement("table");e.setAttribute("id","restaurant-hours");var t="";return Object.keys(n).forEach(function(e){t+="<tr><td>"+e+"</td><td>"+n[e]+"</td></tr>"}),e.innerHTML=t,e},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,n=document.getElementById("reviews-container"),t="\n    <h3>Reviews</h3>\n  ";if(!e)return t+="<p>No reviews yet!'</p>",void(n.innerHtml=t);var r=document.getElementById("reviews-list");e.forEach(function(e){r.insertAdjacentHTML("beforeend",createReviewHTML(e))}),n.appendChild(r)},createReviewHTML=function(e){return"\n    <li>\n      <p>"+e.name+"</p>\n      <p>"+e.date+"</p>\n      <p>Rating:"+Array(e.rating).join(0).split(0).map(function(e,n){return"\n      &#11088;\n    "}).join("")+"</p>\n      <p>"+e.comments+"</p>\n    </li>\n  "},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,n=document.getElementById("breadcrumb"),t=document.createElement("li");t.setAttribute("aria-current",e.name),t.innerHTML=e.name,n.appendChild(t)},getParameterByName=function(e,n){n||(n=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnQtaW5mby5qcyJdLCJuYW1lcyI6WyJtYXAiLCJyZXN0YXVyYW50Iiwid2luZG93IiwiaW5pdE1hcCIsImVycm9yIiwiZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCIsImNvbnNvbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJzZWxmIiwiZ29vZ2xlIiwic2Nyb2xsd2hlZWwiLCJEQkhlbHBlciIsIm1hcE1hcmtlckZvclJlc3RhdXJhbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJyZXN0YXVyYW50SXRlbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbWciLCJJbWFnZUhlbHBlciIsImxhenlMb2FkSW1hZ2VzIiwiZGV0YWlsIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiLCJsb2FkaW5nQmFsbCIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiZmlsbFJlc3RhdXJhbnRIVE1MIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiQ3VzdG9tRXZlbnQiLCJyZXN0YXVyYW50SFRNTCIsIm5hbWUiLCJjdWlzaW5lX3R5cGUiLCJhZGRyZXNzIiwiaW5uZXJIVE1MIiwicmVzdGF1cmFudEluZm8iLCJvcGVyYXRpbmdfaG91cnMiLCJzZXRUaW1lb3V0IiwiZGlzcGF0Y2hFdmVudCIsImZpbGxSZXN0YXVyYW50SG91cnNIVE1MIiwiZ3JpZERldGFpbCIsImZpbGxSZXZpZXdzSFRNTCIsImhvdXJzIiwib3BlcmF0aW5nSG91cnMiLCJ0YWJsZSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJmb3JFYWNoIiwia2V5IiwicmV2aWV3cyIsInJldmlldyIsImNvbnRhaW5lciIsImFwcGVuZENoaWxkIiwidWwiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJjcmVhdGVSZXZpZXdIVE1MIiwiam9pbiIsImxpIiwiZGF0ZSIsIkFycmF5IiwicmF0aW5nIiwic3BsaXQiLCJpdGVtIiwiaSIsImZpbGxCcmVhZGNydW1iIiwiY29tbWVudHMiLCJicmVhZGNydW1iIiwiaHJlZiIsInJlcGxhY2UiLCJyZWdleCIsInVybCIsImxvY2F0aW9uIiwicmVzdWx0cyIsIlJlZ0V4cCIsImV4ZWMiLCJkZWNvZGVVUklDb21wb25lbnQiXSwibWFwcGluZ3MiOiJhQUFBLElBQ0lBLElBREFDLGdCQUFBQSxFQU9KQyxPQUFPQyxRQUFVLFdBQWpCRCx1QkFBaUIsU0FBQUUsRUFBTUgsR0FDckJJLEVBQ0VDLFFBQUFGLE1BQVdBLElBQ1RFLEtBQUFBLElBQVFGLElBQU1BLE9BQWRHLEtBQUFDLElBQUFDLFNBQUFDLGVBQUEsT0FBQSxDQURGQyxLQUVPLEdBQ0xDLE9BQUFYLEVBQWVZLE9BQ2JGLGFBRDZELElBRzdERyxpQkFINkRDLFNBQS9EQyx1QkFBQUosS0FBQVgsV0FBQVcsS0FBQVosU0FTTEUsT0FkRGUsaUJBQUEsU0FBQSxTQUFBQyxHQWlCRSxJQUFNQyxFQUFpQlYsU0FBU0MsZUFBZSx3QkFEMUNPLEVBQUFBLFNBQWlCRyxpQkFBb0JGLGNBSTFDRyxFQUFBQyxZQUFBQyxlQUFBTCxFQUFBTSxRQUNBSCxFQUFBWixTQUFBZ0IsY0FBQUMseUJBQUFMLEdBQ1VDLEVBQVlDLFdBQXFCQyxHQUUzQ0wsRUFBTVEsWUFBY1IsRUFBZVMsV0FBbkMsSUFFQVQsRUFBQUEsR0FBQUEsYUFBZVUsRUFBWVYsRUFBQUEsR0FBQUEsV0FBQSxNQUcxQixHQU1ILElBQU1kLHVCQUF5QixTQUFDeUIsR0FBaEMsR0FBTXpCLEtBQUFBLFdBQ0p5QixFQUFTN0IsS0FBQUEsS0FBWUEsZ0JBRHZCLENBR0ksSUFBQThCLEVBQUFDLG1CQUFBLE1BQ0RELEVBR0MzQixTQUFRNkIsb0JBQUFGLEVBQVIsU0FBQTNCLEVBQUFILElBQ0E2QixLQUFBQSxXQUFBN0IsSUFLSUsscUJBQ0F3QixFQUFBLEtBQUE3QixJQUpKYyxRQUFTa0IsTUFBQUEsTUFMWDdCLE1BQVc0QiwwQkFDWEYsRUFBUzFCLE1BQUEsU0FnQlg4QixtQkFBQSxXQUFBLElBQUFqQyxFQUFBLEVBQUFrQyxVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBQXZCLEtBQUFYLFdBSVFpQixFQUFRLElBQUlvQixZQUFZLFNBQVUsQ0FBRWQsT0FBUXZCLElBQzVDc0MsRUFBaUI5QixTQUFTQyxlQUFlLHdCQUZyQlQsRUFBQUEsa0NBS0dBLEVBQVd1QyxLQUxkdkMsdUlBVU9BLEVBQVd3QyxhQVZsQnhDLHNGQW1CMUJBLEVBQUF5QyxRQW5CMEJ6Qyx1QkFvQjFCLEdBR0NzQyxFQUFBSSxVQUFBQyxFQUhHM0MsRUFBVzRDLGdCQUFpQixDQU9oQzNDLElBQU80QyxFQUFXckMsU0FBTVcsaUJBQUEsaUJBQ3RCbEIsRUFBTzZDLEdBQUFBLGFBQVBDLDBCQUFBQyxFQUFBLEdBQUFyQixXQUFBLElBSEZzQixrQkFFQWhELE9BQU80QyxXQUFXLFdBQ2hCNUMsT0FBTzZDLGNBQWM3QixJQU9uQjhCLE1BSUFHLHdCQUFKLFdBQUEsSUFBQUMsRUFBQSxFQUFBakIsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUF2QixLQUFBWCxXQUFBNEMsZ0JBSE1RLEVBQVE1QyxTQUFTNkMsY0FBYyxTQUtyQ0QsRUFBQUUsYUFBQSxLQUFBLG9CQUVFSixJQUFBQSxFQUFBQSxHQUtGLE9BRkFFLE9BQU1WLEtBQUFBLEdBQU5hLFFBQUEsU0FBQUMsR0FIRU4sR0FBQUEsV0FBcUJNLEVBQXJCLFlBQW9DTCxFQUFlSyxHQUFuRCxlQUdGSixFQUFNVixVQUFZUSxFQUVYRSxHQU1ISCxnQkFBa0IsV0FBdUMsSUFBdENRLEVBQXNDLEVBQUF2QixVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBNUJ2QixLQUFLWCxXQUFXeUQsUUFHN0NDLEVBQUFBLFNBQUFBLGVBQUoscUJBSUlBLEVBQUFBLDZCQUlILElBQUFELEVBR0RBLE9BTkVDLEdBQUFBLCtCQUtGQyxFQUFXbkQsVUFBU0MsR0FJcEJrRCxJQUFBQSxFQUFVQyxTQUFBQSxlQUFWLGdCQWpCRkgsRUFBQUYsUUFBQSxTQUFBRyxHQWVJRyxFQUFHQyxtQkFBbUIsWUFBYUMsaUJBQWlCTCxNQUV0REMsRUFBVUMsWUFBWUMsSUFjakJHLGlCQU5DLFNBQUFOLEdBb0JOTyxNQVRBQSx3QkFUU1AsRUFBT25CLEtBU2hCLGtCQUdGbUIsRUFBQVEsS0FIRSx5QkFQZ0JDLE1BQU1ULEVBQU9VLFFBQVFKLEtBQUssR0FBR0ssTUFBTSxHQUFHdEUsSUFBSSxTQUFDdUUsRUFBTUMsR0FBUCxNQUFBLDJCQWF0REMsS0FBQUEsSUFOSixrQkFNc0J4RSxFQUErQnlFLFNBTnJELHVCQU1JRCxlQUFpQixXQUFnQyxJQUEvQnhFLEVBQStCLEVBQUFrQyxVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBcEJ2QixLQUFLWCxXQUNoQzBFLEVBQWFsRSxTQUFTQyxlQUFlLGNBVXZDc0IsRUFBQUEsU0FBQUEsY0FBQUEsTUFDSmtDLEVBQUFYLGFBQ1FyRCxlQUFnQjBFLEVBQXRCcEMsTUFDRkEsRUFBQUEsVUFBWXFDLEVBQVFyQyxLQUNwQm1DLEVBQU1HLFlBQVFaLElBSlZsQyxtQkFBcUIsU0FBQ1EsRUFBTXVDLEdBQzNCQSxJQUNIQSxFQUFNN0UsT0FBTzhFLFNBQVNKLE1BQ3hCcEMsRUFBT0EsRUFBS3FDLFFBQVEsVUFBVyxRQUMvQixJQUNFSSxFQURZLElBQUlDLE9BQUosT0FBa0IxQyxFQUFsQixxQkFDSTJDLEtBQUtKLEdBQ3ZCLE9BQUtFLEVBRUFBLEVBQVEsR0FFTkcsbUJBQW1CSCxFQUFRLEdBQUdKLFFBQVEsTUFBTyxNQUQzQyxHQUZBIiwiZmlsZSI6InJlc3RhdXJhbnQtaW5mby5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCByZXN0YXVyYW50O1xudmFyIG1hcDtcblxuXG4vKipcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cbiAqL1xud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XG4gIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgICAgIHpvb206IDE2LFxuICAgICAgICBjZW50ZXI6IHJlc3RhdXJhbnQubGF0bG5nLFxuICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgZmlsbEJyZWFkY3J1bWIoKTtcbiAgICAgIERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQoc2VsZi5yZXN0YXVyYW50LCBzZWxmLm1hcCk7XG4gICAgfVxuICB9KTtcbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZCcsIGZ1bmN0aW9uIChldmVudCkge1xuICBjb25zdCByZXN0YXVyYW50SXRlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWNvbnRhaW5lcicpO1xuICBjb25zdCBncmlkSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbmZvLWdyaWQnKTtcblxuICAvLyBJbWFnZSBIVE1MIGlzIGNyZWF0ZWQgaW4gL2ltZy1oZWxwZXItanNcbiAgLy8gQUwgdGFnIGZvciBJbWcgRWxlbWVudCBpcyBzZXQgaW4gdGhlIGxhenlMb2FkSW1hZ2VzIGZ1bmN0aW9uXG4gIGxldCBpbWcgPSBJbWFnZUhlbHBlci5sYXp5TG9hZEltYWdlcyhldmVudC5kZXRhaWwpO1xuICBpbWcgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChpbWcpO1xuICBjb25zdCBsb2FkaW5nQmFsbCA9IHJlc3RhdXJhbnRJdGVtLmNoaWxkTm9kZXNbMV07XG5cbiAgcmVzdGF1cmFudEl0ZW0ucmVtb3ZlQ2hpbGQocmVzdGF1cmFudEl0ZW0uY2hpbGROb2Rlc1szXSk7XG5cbiBncmlkSW5mb1swXS5pbnNlcnRCZWZvcmUoaW1nLCBncmlkSW5mb1swXS5jaGlsZE5vZGVzWzFdKTtcbn0sIGZhbHNlKTtcblxuXG4vKipcbiAqIEdldCBjdXJyZW50IHJlc3RhdXJhbnQgZnJvbSBwYWdlIFVSTC5cbiAqL1xuY29uc3QgZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCA9IChjYWxsYmFjaykgPT4ge1xuICBpZiAoc2VsZi5yZXN0YXVyYW50KSB7IC8vIHJlc3RhdXJhbnQgYWxyZWFkeSBmZXRjaGVkIVxuICAgIGNhbGxiYWNrKG51bGwsIHNlbGYucmVzdGF1cmFudClcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgaWQgPSBnZXRQYXJhbWV0ZXJCeU5hbWUoJ2lkJyk7XG4gIGlmICghaWQpIHsgLy8gbm8gaWQgZm91bmQgaW4gVVJMXG4gICAgZXJyb3IgPSAnTm8gcmVzdGF1cmFudCBpZCBpbiBVUkwnXG4gICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICB9IGVsc2Uge1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuICAgICAgc2VsZi5yZXN0YXVyYW50ID0gcmVzdGF1cmFudDtcbiAgICAgIGlmICghcmVzdGF1cmFudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZmlsbFJlc3RhdXJhbnRIVE1MKCk7XG4gICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlXG4gKi9cbmNvbnN0IGZpbGxSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50ID0gc2VsZi5yZXN0YXVyYW50KSA9PiB7XG4gIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdsb2FkZWQnLCB7IGRldGFpbDogcmVzdGF1cmFudH0pO1xuICBjb25zdCByZXN0YXVyYW50SFRNTCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWNvbnRhaW5lcicpO1xuXG4gIGNvbnN0IHJlc3RhdXJhbnRJbmZvID0gYFxuICAgIDxoMiBpZD1cInJlc3RhdXJhbnQtbmFtZVwiPiR7cmVzdGF1cmFudC5uYW1lfTwvaDI+XG4gICAgPGRpdiBjbGFzcz1cImxvYWRpbmctYmFsbFwiPlxuICAgICAgPGRpdj48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiaW5mby1ncmlkXCI+XG4gICAgICA8cCBpZD1cInJlc3RhdXJhbnQtY3Vpc2luZVwiPiR7cmVzdGF1cmFudC5jdWlzaW5lX3R5cGV9PC9wPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJkZXRhaWxzLWdyaWRcIj5cbiAgICAgIDxwIGlkPVwicmVzdGF1cmFudC1hZGRyZXNzXCI+JHtyZXN0YXVyYW50LmFkZHJlc3N9PC9wPlxuICAgIDwvZGl2PlxuICBgO1xuXG4gIHJlc3RhdXJhbnRIVE1MLmlubmVySFRNTCA9IHJlc3RhdXJhbnRJbmZvO1xuXG4gIC8vIGZpbGwgb3BlcmF0aW5nIGhvdXJzXG4gIGlmIChyZXN0YXVyYW50Lm9wZXJhdGluZ19ob3Vycykge1xuICAgIGNvbnN0IGdyaWREZXRhaWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGV0YWlscy1ncmlkJyk7XG4gICAgZ3JpZERldGFpbFswXS5pbnNlcnRCZWZvcmUoZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwoKSwgZ3JpZERldGFpbFswXS5jaGlsZE5vZGVzWzJdKTtcbiAgfVxuICAvLyBmaWxsIHJldmlld3NcbiAgZmlsbFJldmlld3NIVE1MKCk7XG5cbiAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfSwgMzAwMCk7XG59XG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgb3BlcmF0aW5nIGhvdXJzIEhUTUwgdGFibGUgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAqL1xuY29uc3QgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwgPSAob3BlcmF0aW5nSG91cnMgPSBzZWxmLnJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSA9PiB7XG4gIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgdGFibGUuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJyZXN0YXVyYW50LWhvdXJzXCIpO1xuXG4gIGxldCBob3VycyA9ICcnO1xuXG4gIC8vIExvb3AgdGhyb3VnaCBvcGVyYXRpbmcgaG91cnMgYW5kIGJ1aWxkIHRhYmxlIHJvd3NcbiAgT2JqZWN0LmtleXMob3BlcmF0aW5nSG91cnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGhvdXJzICs9ICBgPHRyPjx0ZD4ke2tleX08L3RkPjx0ZD4ke29wZXJhdGluZ0hvdXJzW2tleV19PC90ZD48L3RyPmA7XG4gIH0pO1xuXG4gIHRhYmxlLmlubmVySFRNTCA9IGhvdXJzO1xuXG4gIHJldHVybiB0YWJsZTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYWxsIHJldmlld3MgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmNvbnN0IGZpbGxSZXZpZXdzSFRNTCA9IChyZXZpZXdzID0gc2VsZi5yZXN0YXVyYW50LnJldmlld3MpID0+IHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtY29udGFpbmVyJyk7XG5cbiAgbGV0IHJldmlldyA9IGBcbiAgICA8aDM+UmV2aWV3czwvaDM+XG4gIGA7XG5cbiAgaWYgKCFyZXZpZXdzKSB7XG4gICAgcmV2aWV3ICs9IGA8cD5ObyByZXZpZXdzIHlldCEnPC9wPmA7XG4gICAgY29udGFpbmVyLmlubmVySHRtbCA9IHJldmlldztcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWxpc3QnKTtcbiAgcmV2aWV3cy5mb3JFYWNoKHJldmlldyA9PiB7XG4gICAgdWwuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBjcmVhdGVSZXZpZXdIVE1MKHJldmlldykpO1xuICB9KTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHVsKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgcmV2aWV3IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAqL1xuY29uc3QgY3JlYXRlUmV2aWV3SFRNTCA9IChyZXZpZXcpID0+IHtcbiAgY29uc3Qgc3RhclJhdGluZyA9IGAmIzExMDg4O2A7XG4gIGNvbnN0IGxpID0gYFxuICAgIDxsaT5cbiAgICAgIDxwPiR7cmV2aWV3Lm5hbWV9PC9wPlxuICAgICAgPHA+JHtyZXZpZXcuZGF0ZX08L3A+XG4gICAgICA8cD5SYXRpbmc6JHtBcnJheShyZXZpZXcucmF0aW5nKS5qb2luKDApLnNwbGl0KDApLm1hcCgoaXRlbSwgaSkgPT4gYFxuICAgICAgJHtzdGFyUmF0aW5nfVxuICAgIGApLmpvaW4oJycpfTwvcD5cbiAgICAgIDxwPiR7cmV2aWV3LmNvbW1lbnRzfTwvcD5cbiAgICA8L2xpPlxuICBgO1xuXG4gIHJldHVybiBsaTtcbn1cblxuLyoqXG4gKiBBZGQgcmVzdGF1cmFudCBuYW1lIHRvIHRoZSBicmVhZGNydW1iIG5hdmlnYXRpb24gbWVudVxuICovXG5jb25zdCBmaWxsQnJlYWRjcnVtYiA9IChyZXN0YXVyYW50PXNlbGYucmVzdGF1cmFudCkgPT4ge1xuICBjb25zdCBicmVhZGNydW1iID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFkY3J1bWInKTtcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICBsaS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWN1cnJlbnRcIiwgcmVzdGF1cmFudC5uYW1lKTtcbiAgbGkuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuICBicmVhZGNydW1iLmFwcGVuZENoaWxkKGxpKTtcbn1cblxuLyoqXG4gKiBHZXQgYSBwYXJhbWV0ZXIgYnkgbmFtZSBmcm9tIHBhZ2UgVVJMLlxuICovXG5jb25zdCBnZXRQYXJhbWV0ZXJCeU5hbWUgPSAobmFtZSwgdXJsKSA9PiB7XG4gIGlmICghdXJsKVxuICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXFxdXS9nLCAnXFxcXCQmJyk7XG4gIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgWz8mXSR7bmFtZX0oPShbXiYjXSopfCZ8I3wkKWApLFxuICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7XG4gIGlmICghcmVzdWx0cylcbiAgICByZXR1cm4gbnVsbDtcbiAgaWYgKCFyZXN1bHRzWzJdKVxuICAgIHJldHVybiAnJztcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcbn1cbiJdfQ==
